<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <style>
       #map {
        height: 600px;
        width: 100%;
       }
    </style>
  </head>
  <body>
    
    <h3>My Google Maps Demo</h3>
    <div id="map"></div>
    <script>

    function initMap() {
        var Center = {lat: <%= result.solutions[0].items[0].latitude %>, lng: <%= result.solutions[0].items[0].longitude %>};
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 14,
          center: Center
        });

        var minLat = Center.lat, maxLat = Center.lat, minLng = Center.lng, maxLng = Center.lng;
                
        <% for(var i=0; i<result.solutions[0].items.length; i++){ %>
            var lat = <%= result.solutions[0].items[i].latitude %>, lng = <%= result.solutions[0].items[i].longitude %>; 
            minLat = Math.min(minLat, lat);
            maxLat = Math.max(maxLat, lat);

            minLng = Math.min(minLng, lng);
            maxLng = Math.max(maxLng, lng);

            var marker = new google.maps.Marker({
              position: {lat: lat, lng: lng},
              map: map
            }); 
        <% } %>
        
        var rectangle = new google.maps.Rectangle({
            strokeColor: '#FF0000',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#FF0000',
            fillOpacity: 0.35,
            map: map,
            bounds: {
              north: minLat,
              south: maxLat,
              east: maxLng,
              west: minLng
            }
        });
    }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6hbSjCuN4EQsh34uhHO1C7gMQNdwBBg4&callback=initMap">
    </script>
    <!---->
  </body>
</html>